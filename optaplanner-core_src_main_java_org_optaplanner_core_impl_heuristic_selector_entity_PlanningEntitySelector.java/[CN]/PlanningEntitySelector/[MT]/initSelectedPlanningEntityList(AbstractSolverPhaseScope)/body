{
  List<Object> workingPlanningEntityList=phaseScope.getWorkingEntityList();
  for (Iterator<Object> it=workingPlanningEntityList.iterator(); it.hasNext(); ) {
    Object planningEntity=it.next();
    if (!entityDescriptor.getPlanningEntityClass().isInstance(planningEntity)) {
      it.remove();
    }
 else     if (entityDescriptor.isInitialized(planningEntity)) {
      it.remove();
    }
  }
switch (selectionOrder) {
case ORIGINAL:
    break;
case RANDOM:
  Collections.shuffle(workingPlanningEntityList,phaseScope.getWorkingRandom());
break;
case DECREASING_DIFFICULTY:
PlanningEntitySorter planningEntitySorter=entityDescriptor.getPlanningEntitySorter();
planningEntitySorter.sortDifficultyDescending(phaseScope.getWorkingSolution(),workingPlanningEntityList);
break;
default :
throw new IllegalStateException("The selectionOrder (" + selectionOrder + ") is not implemented.");
}
selectedPlanningEntityList=workingPlanningEntityList;
}
