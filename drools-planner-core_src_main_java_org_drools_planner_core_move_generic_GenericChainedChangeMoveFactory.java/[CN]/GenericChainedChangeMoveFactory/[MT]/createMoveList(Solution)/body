{
  List<Move> moveList=new ArrayList<Move>();
  WorkingMemory workingMemory=solutionDirector.getWorkingMemory();
  for (  Object planningEntity : solutionDescriptor.getPlanningEntityList(solution)) {
    FactHandle planningEntityFactHandle=workingMemory.getFactHandle(planningEntity);
    PlanningEntityDescriptor planningEntityDescriptor=solutionDescriptor.getPlanningEntityDescriptor(planningEntity.getClass());
    for (    PlanningVariableDescriptor planningVariableDescriptor : planningEntityDescriptor.getPlanningVariableDescriptors()) {
      if (!planningVariableDescriptor.isTriggerChainCorrection()) {
        for (        Object toPlanningValue : planningVariableDescriptor.extractPlanningValues(solutionDirector.getWorkingSolution(),planningEntity)) {
          moveList.add(new GenericChangeMove(planningEntity,planningEntityFactHandle,planningVariableDescriptor,toPlanningValue));
        }
      }
 else {
        Object oldChainedEntity=findChainedEntity(planningVariableDescriptor,solution,planningEntity);
        FactHandle oldChainedEntityFactHandle=oldChainedEntity == null ? null : workingMemory.getFactHandle(oldChainedEntity);
        for (        Object toPlanningValue : planningVariableDescriptor.extractPlanningValues(solutionDirector.getWorkingSolution(),planningEntity)) {
          Object newChainedEntity=findChainedEntity(planningVariableDescriptor,solution,toPlanningValue);
          FactHandle newChainedEntityFactHandle=newChainedEntity == null ? null : workingMemory.getFactHandle(newChainedEntity);
          moveList.add(new GenericChainedChangeMove(planningEntity,planningEntityFactHandle,planningVariableDescriptor,toPlanningValue,oldChainedEntity,oldChainedEntityFactHandle,newChainedEntity,newChainedEntityFactHandle));
        }
      }
    }
  }
  return moveList;
}
