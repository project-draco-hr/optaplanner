{
  List<Object> entityList=solutionDescriptor.getPlanningEntityListByPlanningEntityClass(workingSolution,variableDescriptor.getPlanningEntityDescriptor().getPlanningEntityClass());
  Map<Object,List<Object>> variableToEntitiesMap=new HashMap<Object,List<Object>>(entityList.size());
  for (  Object entity : entityList) {
    Object variable=variableDescriptor.getValue(entity);
    List<Object> subEntities=variableToEntitiesMap.get(variable);
    if (subEntities == null) {
      subEntities=new ArrayList<Object>();
      variableToEntitiesMap.put(variable,subEntities);
    }
    subEntities.add(entity);
  }
  return variableToEntitiesMap;
}
