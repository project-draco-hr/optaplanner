{
  PlanningEntityDescriptor planningEntityDescriptor;
  if (planningEntityClass != null) {
    planningEntityDescriptor=solutionDescriptor.getPlanningEntityDescriptor(planningEntityClass);
    if (planningEntityDescriptor == null) {
      throw new IllegalArgumentException("The greedyFitPlanningEntity has a planningEntityClass (" + planningEntityClass + ") that has not been configured as a planningEntity.");
    }
  }
 else {
    Set<Class<?>> planningEntityImplementationClassSet=solutionDescriptor.getPlanningEntityImplementationClassSet();
    if (planningEntityImplementationClassSet.size() != 1) {
      throw new IllegalArgumentException("The greedyFitPlanningEntity has no planningEntityClass but there are multiple (" + planningEntityImplementationClassSet.size() + ") planningEntityClasses.");
    }
    planningEntityDescriptor=solutionDescriptor.getPlanningEntityDescriptor(planningEntityImplementationClassSet.iterator().next());
  }
  PlanningEntitySelector planningEntitySelector=new PlanningEntitySelector(planningEntityDescriptor);
  planningEntitySelector.setSelectionOrder(selectionOrder != null ? selectionOrder : PlanningEntitySelectionOrder.ORIGINAL);
  planningEntitySelector.setResetInitializedPlanningEntities(resetInitializedPlanningEntities != null ? resetInitializedPlanningEntities.booleanValue() : false);
  return planningEntitySelector;
}
