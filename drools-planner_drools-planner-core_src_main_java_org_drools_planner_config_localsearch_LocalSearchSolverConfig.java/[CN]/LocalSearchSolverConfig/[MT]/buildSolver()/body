{
  DefaultLocalSearchSolver localSearchSolver=new DefaultLocalSearchSolver();
  if (environmentMode != EnvironmentMode.PRODUCTION) {
    if (randomSeed != null) {
      localSearchSolver.setRandomSeed(randomSeed);
    }
 else {
      localSearchSolver.setRandomSeed(DEFAULT_RANDOM_SEED);
    }
  }
  localSearchSolver.setRuleBase(buildRuleBase());
  ScoreDefinition scoreDefinition=scoreDefinitionConfig.buildScoreDefinition();
  localSearchSolver.setScoreDefinition(scoreDefinition);
  localSearchSolver.setScoreCalculator(scoreDefinitionConfig.buildScoreCalculator());
  localSearchSolver.setStartingSolutionInitializer(buildStartingSolutionInitializer());
  localSearchSolver.setBestSolutionRecaller(new BestSolutionRecaller());
  localSearchSolver.setTermination(terminationConfig.buildTermination(scoreDefinition));
  localSearchSolver.setDecider(buildDecider());
  if (environmentMode == EnvironmentMode.DEBUG) {
    localSearchSolver.setAssertStepScoreIsUncorrupted(true);
  }
  return localSearchSolver;
}
