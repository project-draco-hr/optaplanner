{
  TravelingSalesmanTour clone=new TravelingSalesmanTour();
  clone.id=id;
  clone.name=name;
  clone.cityList=cityList;
  clone.depotList=depotList;
  List<Visit> clonedVisitList=new ArrayList<Visit>(visitList.size());
  Map<Long,Visit> idToClonedVisitMap=new HashMap<Long,Visit>(visitList.size());
  for (  Visit visit : visitList) {
    Visit clonedVisit=visit.clone();
    clonedVisitList.add(clonedVisit);
    idToClonedVisitMap.put(clonedVisit.getId(),clonedVisit);
  }
  for (  Visit clonedVisit : clonedVisitList) {
    Terminal previousTerminal=clonedVisit.getPreviousTerminal();
    if (previousTerminal instanceof Visit) {
      Long previousVisitId=((Visit)previousTerminal).getId();
      clonedVisit.setPreviousTerminal(idToClonedVisitMap.get(previousVisitId));
    }
  }
  clone.visitList=clonedVisitList;
  clone.score=score;
  return clone;
}
