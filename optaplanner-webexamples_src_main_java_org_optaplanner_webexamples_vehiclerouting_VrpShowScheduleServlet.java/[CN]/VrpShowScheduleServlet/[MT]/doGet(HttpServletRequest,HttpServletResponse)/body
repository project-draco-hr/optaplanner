{
  resp.setHeader("Cache-Control","no-cache, no-store, must-revalidate");
  resp.setHeader("Pragma","no-cache");
  resp.setHeader("Expires","0");
  HttpSession session=req.getSession();
  VehicleRoutingSolution shownSolution=(VehicleRoutingSolution)session.getAttribute(VrpSessionAttributeName.SHOWN_SOLUTION);
  Dimension size=new Dimension(800,600);
  BufferedImage image;
  if (shownSolution == null) {
    schedulePainter.createCanvas(size.width,size.height);
  }
 else {
    schedulePainter.reset(shownSolution,size,null);
  }
  image=schedulePainter.getCanvas();
  resp.setContentType("image/png");
  ImageIO.write(image,"png",resp.getOutputStream());
}
