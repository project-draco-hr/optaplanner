{
  benchmarkingStarted();
  warmUp(xStream);
  Map<File,List<SolverStatistic>> unsolvedSolutionFileToStatisticMap=new LinkedHashMap<File,List<SolverStatistic>>();
  for (  SolverBenchmark solverBenchmark : solverBenchmarkList) {
    for (    PlannerBenchmarkResult result : solverBenchmark.getPlannerBenchmarkResultList()) {
      Solver solver=solverBenchmark.getSolverConfig().buildSolver();
      File unsolvedSolutionFile=result.getUnsolvedSolutionFile();
      Solution unsolvedSolution=readUnsolvedSolution(xStream,unsolvedSolutionFile);
      solver.setPlanningProblem(unsolvedSolution);
      List<SolverStatistic> statisticList=getOrCreateStatisticList(unsolvedSolutionFileToStatisticMap,unsolvedSolutionFile);
      for (      SolverStatistic statistic : statisticList) {
        statistic.addListener(solver,solverBenchmark.getName());
      }
      solver.solve();
      Solution solvedSolution=solver.getBestSolution();
      result.setTimeMillisSpend(solver.getTimeMillisSpend());
      DefaultSolverScope solverScope=((DefaultSolver)solver).getSolverScope();
      result.setCalculateCount(solverScope.getCalculateCount());
      result.setScore(solvedSolution.getScore());
      SolutionDescriptor solutionDescriptor=((DefaultSolver)solver).getSolutionDescriptor();
      result.setPlanningEntityCount(solutionDescriptor.getPlanningEntityCount(solvedSolution));
      result.setProblemScale(solutionDescriptor.getProblemScale(solvedSolution));
      for (      SolverStatistic statistic : statisticList) {
        statistic.removeListener(solver,solverBenchmark.getName());
      }
      writeSolvedSolution(xStream,solverBenchmark,result,solvedSolution);
    }
  }
  benchmarkingEnded(xStream,unsolvedSolutionFileToStatisticMap);
}
