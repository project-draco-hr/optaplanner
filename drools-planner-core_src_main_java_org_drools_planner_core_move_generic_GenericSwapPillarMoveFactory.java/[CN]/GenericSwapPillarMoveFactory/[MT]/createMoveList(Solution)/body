{
  List<Move> moveList=new ArrayList<Move>();
  List<Object> globalEntityList=solutionDescriptor.getPlanningEntityList(solution);
  for (  Class<?> entityClass : solutionDescriptor.getPlanningEntityImplementationClassSet()) {
    PlanningEntityDescriptor entityDescriptor=solutionDescriptor.getPlanningEntityDescriptor(entityClass);
    Collection<PlanningVariableDescriptor> variableDescriptors=entityDescriptor.getPlanningVariableDescriptors();
    for (    PlanningVariableDescriptor variableDescriptor : variableDescriptors) {
      if (variableDescriptor.isChained()) {
        throw new IllegalStateException("The planningEntityClass (" + variableDescriptor.getPlanningEntityDescriptor().getPlanningEntityClass() + ")'s planningVariableDescriptor ("+ variableDescriptor.getVariableName()+ ") is chained and can therefor not use the moveFactory ("+ this.getClass()+ ").");
      }
    }
    List<List<Object>> swapEntityListList=buildSwapEntityListList(entityClass,variableDescriptors,globalEntityList);
    for (ListIterator<List<Object>> leftIt=swapEntityListList.listIterator(); leftIt.hasNext(); ) {
      List<Object> leftEntityList=leftIt.next();
      for (ListIterator<List<Object>> rightIt=swapEntityListList.listIterator(leftIt.nextIndex()); rightIt.hasNext(); ) {
        List<Object> rightEntityList=rightIt.next();
        moveList.add(new GenericSwapPillarMove(variableDescriptors,leftEntityList,rightEntityList));
      }
    }
  }
  return moveList;
}
