{
  File inputDir=getInputDir();
  if (!inputDir.exists()) {
    throw new IllegalStateException("The directory inputDir (" + inputDir.getAbsolutePath() + ") does not exist."+ " The working directory should be set to the directory that contains the data directory."+ " This is different in a git clone (optaplanner/optaplanner-examples)"+ " and the release zip (examples).");
  }
  File outputDir=getOutputDir();
  outputDir.mkdirs();
  File[] inputFiles=inputDir.listFiles();
  Arrays.sort(inputFiles,new ProblemFileComparator());
  for (  File inputFile : inputFiles) {
    String inputFileName=inputFile.getName();
    if (inputFileName.endsWith(getInputFileSuffix())) {
      Solution solution=solutionDao.readSolution(inputFile);
      String outputFileName=inputFileName.substring(0,inputFileName.length() - getInputFileSuffix().length()) + getOutputFileSuffix();
      File outputFile=new File(outputDir,outputFileName);
      writeSolution(solution,outputFile);
    }
  }
}
