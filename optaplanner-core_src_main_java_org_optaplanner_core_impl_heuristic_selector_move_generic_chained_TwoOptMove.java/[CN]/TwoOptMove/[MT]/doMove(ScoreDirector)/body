{
  Object leftAnchor=anchorVariableSupply.getAnchor(leftEntity);
  Object rightAnchor=anchorVariableSupply.getAnchor(rightEntity);
  boolean sameAnchor=leftAnchor == rightAnchor;
  Object oldLeftValue=variableDescriptor.getValue(leftEntity);
  Object oldRightValue=variableDescriptor.getValue(rightEntity);
  if (!sameAnchor) {
    scoreDirector.beforeVariableChanged(variableDescriptor,leftEntity);
    scoreDirector.beforeVariableChanged(variableDescriptor,rightEntity);
    variableDescriptor.setValue(leftEntity,oldRightValue);
    variableDescriptor.setValue(rightEntity,oldLeftValue);
    scoreDirector.afterVariableChanged(variableDescriptor,leftEntity);
    scoreDirector.afterVariableChanged(variableDescriptor,rightEntity);
  }
 else {
    boolean rightEntityIsLater=isRightEntityLater(rightAnchor,oldRightValue);
    Object firstEntity=rightEntityIsLater ? leftEntity : rightEntity;
    Object laterEntity=rightEntityIsLater ? rightEntity : leftEntity;
    Object oldFirstValue=rightEntityIsLater ? oldLeftValue : oldRightValue;
    Object oldLaterValue=rightEntityIsLater ? oldRightValue : oldLeftValue;
    scoreDirector.beforeVariableChanged(variableDescriptor,laterEntity);
    variableDescriptor.setValue(laterEntity,firstEntity);
    scoreDirector.beforeVariableChanged(variableDescriptor,firstEntity);
    Object entity=oldLaterValue;
    Object nextEntity=oldFirstValue;
    while (entity != firstEntity) {
      Object value=variableDescriptor.getValue(entity);
      scoreDirector.changeVariableFacade(variableDescriptor,entity,nextEntity);
      nextEntity=entity;
      entity=value;
    }
    scoreDirector.afterVariableChanged(variableDescriptor,laterEntity);
    variableDescriptor.setValue(firstEntity,nextEntity);
    scoreDirector.afterVariableChanged(variableDescriptor,firstEntity);
  }
}
