{
  Collection<Object> facts=new ArrayList<Object>();
  Collection<?> problemFacts=solution.getProblemFacts();
  if (problemFacts == null) {
    throw new IllegalStateException("The solution (" + solution + ")'s method getProblemFacts() should never return null.");
  }
  facts.addAll(problemFacts);
  for (  MemberAccessor entityMemberAccessor : entityPropertyAccessorMap.values()) {
    Object entity=extractEntity(entityMemberAccessor,solution);
    if (entity != null) {
      facts.add(entity);
    }
  }
  for (  MemberAccessor entityCollectionMemberAccessor : entityCollectionPropertyAccessorMap.values()) {
    Collection<Object> entityCollection=extractEntityCollection(entityCollectionMemberAccessor,solution);
    facts.addAll(entityCollection);
  }
  return facts;
}
