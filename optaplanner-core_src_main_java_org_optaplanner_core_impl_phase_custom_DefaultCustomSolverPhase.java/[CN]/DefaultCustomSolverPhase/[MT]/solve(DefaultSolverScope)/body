{
  CustomSolverPhaseScope phaseScope=new CustomSolverPhaseScope(solverScope);
  phaseStarted(phaseScope);
  CustomStepScope stepScope=new CustomStepScope(phaseScope);
  Iterator<CustomSolverPhaseCommand> commandIterator=customSolverPhaseCommandList.iterator();
  while (!termination.isPhaseTerminated(phaseScope) && commandIterator.hasNext()) {
    CustomSolverPhaseCommand customSolverPhaseCommand=commandIterator.next();
    stepStarted(stepScope);
    customSolverPhaseCommand.changeWorkingSolution(solverScope.getScoreDirector());
    int uninitializedVariableCount=solverScope.getSolutionDescriptor().countUninitializedVariables(stepScope.getWorkingSolution());
    stepScope.setUninitializedVariableCount(uninitializedVariableCount);
    Score score=phaseScope.calculateScore();
    stepScope.setScore(score);
    stepEnded(stepScope);
    phaseScope.setLastCompletedStepScope(stepScope);
    stepScope=new CustomStepScope(phaseScope);
  }
  phaseEnded(phaseScope);
}
