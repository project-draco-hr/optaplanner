{
  if (!isConstraintMatchEnabled() || !uncorruptedScoreDirector.isConstraintMatchEnabled()) {
    return "  Score corruption analysis could not be generated because" + " either corrupted constraintMatchEnabled (" + isConstraintMatchEnabled() + " or uncorrupted constraintMatchEnabled ("+ uncorruptedScoreDirector.isConstraintMatchEnabled()+ ") is disabled.\n"+ "  Check your score constraints.";
  }
  Collection<ScoreConstraintMatchTotal> workingConstraintMatchTotals=getConstraintMatchTotals();
  Collection<ScoreConstraintMatchTotal> uncorruptedConstraintMatchTotals=uncorruptedScoreDirector.getConstraintMatchTotals();
  Set<ScoreConstraintMatch> excessSet=new LinkedHashSet<ScoreConstraintMatch>();
  Set<ScoreConstraintMatch> lackingSet=new LinkedHashSet<ScoreConstraintMatch>();
  final int CONSTRAINT_MATCH_DISPLAY_LIMIT=8;
  StringBuilder analysis=new StringBuilder();
  if (!excessSet.isEmpty()) {
    analysis.append("  The corrupted scoreDirector has ").append(excessSet.size()).append(" ScoreConstraintMatch(s) in excess:\n");
    int count=0;
    for (    ScoreConstraintMatch o : excessSet) {
      if (count >= CONSTRAINT_MATCH_DISPLAY_LIMIT) {
        analysis.append("    ... ").append(excessSet.size() - CONSTRAINT_MATCH_DISPLAY_LIMIT).append(" more\n");
        break;
      }
      analysis.append("    ").append(o.toString()).append("\n");
      count++;
    }
  }
  if (!lackingSet.isEmpty()) {
    analysis.append("  The corrupted scoreDirector has ").append(lackingSet.size()).append(" ScoreConstraintMatch(s) lacking:\n");
    int count=0;
    for (    ScoreConstraintMatch o : lackingSet) {
      if (count >= CONSTRAINT_MATCH_DISPLAY_LIMIT) {
        analysis.append("    ... ").append(lackingSet.size() - CONSTRAINT_MATCH_DISPLAY_LIMIT).append(" more\n");
        break;
      }
      analysis.append("    ").append(o.toString()).append("\n");
      count++;
    }
  }
  if (excessSet.isEmpty() && lackingSet.isEmpty()) {
    analysis.append("  The corrupted scoreDirector has no ScoreConstraintMatch(s) in excess or lacking." + " That could be a bug in this class (").append(getClass()).append(").\n");
  }
  analysis.append("  Check your score constraints.");
  return analysis.toString();
}
