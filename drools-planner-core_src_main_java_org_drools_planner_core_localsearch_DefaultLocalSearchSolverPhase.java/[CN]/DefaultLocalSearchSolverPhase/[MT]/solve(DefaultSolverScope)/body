{
  LocalSearchSolverPhaseScope localSearchSolverPhaseScope=new LocalSearchSolverPhaseScope(solverScope);
  phaseStarted(localSearchSolverPhaseScope);
  LocalSearchStepScope localSearchStepScope=createNextStepScope(localSearchSolverPhaseScope,null);
  while (!termination.isPhaseTerminated(localSearchSolverPhaseScope)) {
    localSearchStepScope.setTimeGradient(termination.calculatePhaseTimeGradient(localSearchSolverPhaseScope));
    beforeDeciding(localSearchStepScope);
    decider.decideNextStep(localSearchStepScope);
    Move nextStep=localSearchStepScope.getStep();
    if (nextStep == null) {
      logger.warn("    Cancelled step index ({}), time spend ({}): there is no doable move. Terminating phase early.",localSearchStepScope.getStepIndex(),localSearchSolverPhaseScope.calculateSolverTimeMillisSpend());
      break;
    }
    stepDecided(localSearchStepScope);
    nextStep.doMove(localSearchStepScope.getWorkingMemory());
    localSearchSolverPhaseScope.getWorkingSolution().setScore(localSearchStepScope.getScore());
    if (assertStepScoreIsUncorrupted) {
      localSearchSolverPhaseScope.assertWorkingScore(localSearchStepScope.getScore());
    }
    stepTaken(localSearchStepScope);
    localSearchStepScope=createNextStepScope(localSearchSolverPhaseScope,localSearchStepScope);
  }
  phaseEnded(localSearchSolverPhaseScope);
}
