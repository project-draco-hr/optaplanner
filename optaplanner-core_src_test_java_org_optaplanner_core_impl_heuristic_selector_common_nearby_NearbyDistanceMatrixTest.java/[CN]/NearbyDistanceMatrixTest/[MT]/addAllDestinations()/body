{
  final MatrixTestdataObject a=new MatrixTestdataObject("a",0,new double[]{0.0,4.0,2.0,6.0});
  final MatrixTestdataObject b=new MatrixTestdataObject("b",1,new double[]{4.0,0.0,5.0,10.0});
  final MatrixTestdataObject c=new MatrixTestdataObject("c",2,new double[]{2.0,5.0,0.0,7.0});
  final MatrixTestdataObject d=new MatrixTestdataObject("d",3,new double[]{6.0,10.0,7.0,0.0});
  List<Object> entityList=Arrays.<Object>asList(a,b,c,d);
  NearbyDistanceMeter<MatrixTestdataObject,MatrixTestdataObject> meter=new NearbyDistanceMeter<MatrixTestdataObject,MatrixTestdataObject>(){
    @Override public double getNearbyDistance(    MatrixTestdataObject origin,    MatrixTestdataObject destination){
      return origin.distances[destination.index];
    }
  }
;
  NearbyDistanceMatrix nearbyDistanceMatrix=new NearbyDistanceMatrix(meter,4);
  nearbyDistanceMatrix.addAllDestinations(a,entityList.iterator(),4);
  nearbyDistanceMatrix.addAllDestinations(b,entityList.iterator(),4);
  nearbyDistanceMatrix.addAllDestinations(c,entityList.iterator(),4);
  nearbyDistanceMatrix.addAllDestinations(d,entityList.iterator(),4);
  assertSame(a,nearbyDistanceMatrix.getDestination(a,0));
  assertSame(c,nearbyDistanceMatrix.getDestination(a,1));
  assertSame(b,nearbyDistanceMatrix.getDestination(a,2));
  assertSame(d,nearbyDistanceMatrix.getDestination(a,3));
  assertSame(b,nearbyDistanceMatrix.getDestination(b,0));
  assertSame(a,nearbyDistanceMatrix.getDestination(b,1));
  assertSame(c,nearbyDistanceMatrix.getDestination(b,2));
  assertSame(d,nearbyDistanceMatrix.getDestination(b,3));
  assertSame(c,nearbyDistanceMatrix.getDestination(c,0));
  assertSame(a,nearbyDistanceMatrix.getDestination(c,1));
  assertSame(b,nearbyDistanceMatrix.getDestination(c,2));
  assertSame(d,nearbyDistanceMatrix.getDestination(c,3));
  assertSame(d,nearbyDistanceMatrix.getDestination(d,0));
  assertSame(a,nearbyDistanceMatrix.getDestination(d,1));
  assertSame(c,nearbyDistanceMatrix.getDestination(d,2));
  assertSame(b,nearbyDistanceMatrix.getDestination(d,3));
}
