{
  StatefulSession tmpWorkingMemory=ruleBase.newStatefulSession();
  ScoreCalculator tmpScoreCalculator=workingScoreCalculator.clone();
  tmpWorkingMemory.setGlobal(GLOBAL_SCORE_CALCULATOR_KEY,tmpScoreCalculator);
  for (  Object fact : workingSolution.getFacts()) {
    tmpWorkingMemory.insert(fact);
  }
  tmpWorkingMemory.fireAllRules();
  Score realScore=tmpScoreCalculator.calculateScore();
  tmpWorkingMemory.dispose();
  if (!presumedScore.equals(realScore)) {
    throw new IllegalStateException("The presumedScore (" + presumedScore + ") is corrupted because it is not the realScore  ("+ realScore+ ").\n"+ "Presumed workingMemory:\n"+ buildConstraintOccurrenceSummary(workingMemory)+ "Real workingMemory:\n"+ buildConstraintOccurrenceSummary(tmpWorkingMemory));
  }
}
