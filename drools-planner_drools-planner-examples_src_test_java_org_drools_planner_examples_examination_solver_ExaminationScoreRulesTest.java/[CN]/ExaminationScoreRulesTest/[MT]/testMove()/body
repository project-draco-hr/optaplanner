{
  LocalSearchSolverScope localSearchSolverScope=new LocalSearchSolverScope();
  localSearchSolverScope.setRuleBase(buildRuleBase());
  localSearchSolverScope.setWorkingScoreCalculator(new DefaultHardAndSoftConstraintScoreCalculator());
  Examination examination=(Examination)new ExaminationDaoImpl().readSolution(getClass().getResourceAsStream("/org/drools/planner/examples/examination/data/testExaminationScoreRules.xml"));
  localSearchSolverScope.setWorkingSolution(examination);
  WorkingMemory workingMemory=localSearchSolverScope.getWorkingMemory();
  localSearchSolverScope.calculateScoreFromWorkingMemory();
  Exam exam=findExamById(examination,123L);
  Room room=findRoomById(examination,0L);
  ExaminationMoveHelper.moveRoom(workingMemory,exam,room);
  Score statefulScore=localSearchSolverScope.calculateScoreFromWorkingMemory();
  localSearchSolverScope.setWorkingSolution(examination);
  Score statelessScore=localSearchSolverScope.calculateScoreFromWorkingMemory();
  assertEquals(statelessScore,statefulScore);
}
