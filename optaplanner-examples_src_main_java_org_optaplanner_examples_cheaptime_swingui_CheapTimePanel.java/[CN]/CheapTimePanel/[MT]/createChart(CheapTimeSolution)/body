{
  YIntervalSeriesCollection seriesCollection=new YIntervalSeriesCollection();
  Map<Machine,YIntervalSeries> machineSeriesMap=new LinkedHashMap<Machine,YIntervalSeries>(solution.getMachineList().size());
  YIntervalRenderer renderer=new YIntervalRenderer();
  int seriesIndex=0;
  for (  Machine machine : solution.getMachineList()) {
    YIntervalSeries projectSeries=new YIntervalSeries(machine.getLabel());
    seriesCollection.addSeries(projectSeries);
    machineSeriesMap.put(machine,projectSeries);
    renderer.setSeriesShape(seriesIndex,new Rectangle());
    renderer.setSeriesStroke(seriesIndex,new BasicStroke(3.0f));
    seriesIndex++;
  }
  YIntervalSeries unassignedProjectSeries=new YIntervalSeries("Unassigned");
  seriesCollection.addSeries(unassignedProjectSeries);
  machineSeriesMap.put(null,unassignedProjectSeries);
  renderer.setSeriesShape(seriesIndex,new Rectangle());
  renderer.setSeriesStroke(seriesIndex,new BasicStroke(3.0f));
  for (  TaskAssignment taskAssignment : solution.getTaskAssignmentList()) {
    Integer startPeriod=taskAssignment.getStartPeriod();
    Integer endPeriod=taskAssignment.getEndPeriod();
    if (startPeriod == null) {
      startPeriod=0;
      endPeriod=0;
    }
    YIntervalSeries machineSeries=machineSeriesMap.get(taskAssignment.getMachine());
    machineSeries.add(taskAssignment.getId(),(startPeriod + endPeriod) / 2.0,startPeriod,endPeriod);
  }
  NumberAxis domainAxis=new NumberAxis("Task");
  domainAxis.setStandardTickUnits(NumberAxis.createIntegerTickUnits());
  domainAxis.setRange(-0.5,solution.getTaskAssignmentList().size() - 0.5);
  domainAxis.setInverted(true);
  NumberAxis rangeAxis=new NumberAxis("Period");
  rangeAxis.setRange(-0.5,solution.getGlobalPeriodRangeTo() + 0.5);
  XYPlot plot=new XYPlot(seriesCollection,domainAxis,rangeAxis,renderer);
  plot.setOrientation(PlotOrientation.HORIZONTAL);
  return new JFreeChart("Project Job Scheduling",JFreeChart.DEFAULT_TITLE_FONT,plot,true);
}
