{
  ScoreDefinition scoreDefinition=mock(ScoreDefinition.class);
  when(scoreDefinition.getLevelsSize()).thenReturn(2);
  BestScoreTermination termination=new BestScoreTermination(scoreDefinition,BendableScore.valueOfInitialized(new int[]{-10},new int[]{-300}),new double[]{0.75});
  assertEquals(0.6,termination.calculateTimeGradient(BendableScore.valueOfInitialized(new int[]{-20},new int[]{-400}),BendableScore.valueOfInitialized(new int[]{-10},new int[]{-300}),BendableScore.valueOfInitialized(new int[]{-14},new int[]{-340})),0.0);
  assertEquals(0.75,termination.calculateTimeGradient(BendableScore.valueOfInitialized(new int[]{-20},new int[]{-400}),BendableScore.valueOfInitialized(new int[]{-10},new int[]{-300}),BendableScore.valueOfInitialized(new int[]{-10},new int[]{-400})),0.0);
  assertEquals(0.25,termination.calculateTimeGradient(BendableScore.valueOfInitialized(new int[]{-20},new int[]{-400}),BendableScore.valueOfInitialized(new int[]{-10},new int[]{-300}),BendableScore.valueOfInitialized(new int[]{-20},new int[]{-300})),0.0);
  assertEquals(0.75,termination.calculateTimeGradient(BendableScore.valueOfInitialized(new int[]{-20},new int[]{-400}),BendableScore.valueOfInitialized(new int[]{-10},new int[]{-300}),BendableScore.valueOfInitialized(new int[]{-10},new int[]{-900})),0.0);
  assertEquals(0.0,termination.calculateTimeGradient(BendableScore.valueOfInitialized(new int[]{-20},new int[]{-400}),BendableScore.valueOfInitialized(new int[]{-10},new int[]{-300}),BendableScore.valueOfInitialized(new int[]{-90},new int[]{-300})),0.0);
  assertEquals(1.0,termination.calculateTimeGradient(BendableScore.valueOfInitialized(new int[]{-10},new int[]{-300}),BendableScore.valueOfInitialized(new int[]{-10},new int[]{-300}),BendableScore.valueOfInitialized(new int[]{-10},new int[]{-300})),0.0);
  assertEquals(0.0,termination.calculateTimeGradient(BendableScore.valueOfInitialized(new int[]{-20},new int[]{-400}),BendableScore.valueOfInitialized(new int[]{-10},new int[]{-300}),BendableScore.valueOfInitialized(new int[]{-20},new int[]{-400})),0.0);
  assertEquals(1.0,termination.calculateTimeGradient(BendableScore.valueOfInitialized(new int[]{-20},new int[]{-400}),BendableScore.valueOfInitialized(new int[]{-10},new int[]{-300}),BendableScore.valueOfInitialized(new int[]{-10},new int[]{-300})),0.0);
  assertEquals(0.75 + (0.6 * 0.25),termination.calculateTimeGradient(BendableScore.valueOfInitialized(new int[]{-10},new int[]{-400}),BendableScore.valueOfInitialized(new int[]{-10},new int[]{-300}),BendableScore.valueOfInitialized(new int[]{-10},new int[]{-340})),0.0);
  assertEquals(0.0,termination.calculateTimeGradient(BendableScore.valueOfInitialized(new int[]{-10},new int[]{-400}),BendableScore.valueOfInitialized(new int[]{-10},new int[]{-300}),BendableScore.valueOfInitialized(new int[]{-20},new int[]{-340})),0.0);
  assertEquals(1.0,termination.calculateTimeGradient(BendableScore.valueOfInitialized(new int[]{-10},new int[]{-400}),BendableScore.valueOfInitialized(new int[]{-10},new int[]{-300}),BendableScore.valueOfInitialized(new int[]{-0},new int[]{-340})),0.0);
  assertEquals((0.6 * 0.75) + 0.25,termination.calculateTimeGradient(BendableScore.valueOfInitialized(new int[]{-20},new int[]{-300}),BendableScore.valueOfInitialized(new int[]{-10},new int[]{-300}),BendableScore.valueOfInitialized(new int[]{-14},new int[]{-300})),0.0);
  assertEquals(0.6 * 0.75,termination.calculateTimeGradient(BendableScore.valueOfInitialized(new int[]{-20},new int[]{-300}),BendableScore.valueOfInitialized(new int[]{-10},new int[]{-300}),BendableScore.valueOfInitialized(new int[]{-14},new int[]{-400})),0.0);
  assertEquals((0.6 * 0.75) + 0.25,termination.calculateTimeGradient(BendableScore.valueOfInitialized(new int[]{-20},new int[]{-300}),BendableScore.valueOfInitialized(new int[]{-10},new int[]{-300}),BendableScore.valueOfInitialized(new int[]{-14},new int[]{-0})),0.0);
}
