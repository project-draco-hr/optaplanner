{
  ShiftingHardPenaltyDeciderScoreComparatorFactory deciderScoreComparatorFactory=new ShiftingHardPenaltyDeciderScoreComparatorFactory();
  deciderScoreComparatorFactory.setHardScoreActivationThreshold(-10);
  deciderScoreComparatorFactory.setSuccessiveNoHardChangeMinimum(1);
  deciderScoreComparatorFactory.setSuccessiveNoHardChangeMaximum(3);
  deciderScoreComparatorFactory.setSuccessiveNoHardChangeRepetitionMultiplicand(5.0);
  deciderScoreComparatorFactory.setHardWeightSurvivalRatio(0.9);
  LocalSearchSolverScope localSearchSolverScope=createLocalSearchSolverScope();
  deciderScoreComparatorFactory.solvingStarted(localSearchSolverScope);
  LocalSearchStepScope localSearchStepScope=localSearchSolverScope.getLastCompletedLocalSearchStepScope();
  localSearchStepScope=nextStepScope(localSearchStepScope);
  deciderScoreComparatorFactory.beforeDeciding(localSearchStepScope);
  assertTrue(deciderScoreComparatorFactory.createDeciderScoreComparator() instanceof NaturalScoreComparator);
  deciderScoreComparatorFactory.stepDecided(localSearchStepScope);
  localSearchStepScope.setScore(DefaultHardAndSoftScore.valueOf(-11,-200));
  deciderScoreComparatorFactory.stepTaken(localSearchStepScope);
  localSearchStepScope=nextStepScope(localSearchStepScope);
  deciderScoreComparatorFactory.beforeDeciding(localSearchStepScope);
  assertTrue(deciderScoreComparatorFactory.createDeciderScoreComparator() instanceof NaturalScoreComparator);
  deciderScoreComparatorFactory.stepDecided(localSearchStepScope);
  localSearchStepScope.setScore(DefaultHardAndSoftScore.valueOf(-10,-200));
  localSearchSolverScope.setBestSolutionStepIndex(localSearchStepScope.getStepIndex());
  deciderScoreComparatorFactory.stepTaken(localSearchStepScope);
  localSearchStepScope=nextStepScope(localSearchStepScope);
  deciderScoreComparatorFactory.beforeDeciding(localSearchStepScope);
  assertTrue(deciderScoreComparatorFactory.createDeciderScoreComparator() instanceof NaturalScoreComparator);
  deciderScoreComparatorFactory.stepDecided(localSearchStepScope);
  localSearchStepScope.setScore(DefaultHardAndSoftScore.valueOf(-10,-200));
  deciderScoreComparatorFactory.stepTaken(localSearchStepScope);
  localSearchStepScope=nextStepScope(localSearchStepScope);
  deciderScoreComparatorFactory.beforeDeciding(localSearchStepScope);
  assertEquals(1000,((HardPenaltyDeciderScoreComparator)deciderScoreComparatorFactory.createDeciderScoreComparator()).getHardWeight());
  deciderScoreComparatorFactory.stepDecided(localSearchStepScope);
  localSearchStepScope.setScore(DefaultHardAndSoftScore.valueOf(-10,-200));
  deciderScoreComparatorFactory.stepTaken(localSearchStepScope);
  localSearchStepScope=nextStepScope(localSearchStepScope);
  deciderScoreComparatorFactory.beforeDeciding(localSearchStepScope);
  assertEquals(900,((HardPenaltyDeciderScoreComparator)deciderScoreComparatorFactory.createDeciderScoreComparator()).getHardWeight());
  deciderScoreComparatorFactory.stepDecided(localSearchStepScope);
  localSearchStepScope.setScore(DefaultHardAndSoftScore.valueOf(-10,-200));
  deciderScoreComparatorFactory.stepTaken(localSearchStepScope);
  localSearchStepScope=nextStepScope(localSearchStepScope);
  deciderScoreComparatorFactory.beforeDeciding(localSearchStepScope);
  assertEquals(810,((HardPenaltyDeciderScoreComparator)deciderScoreComparatorFactory.createDeciderScoreComparator()).getHardWeight());
  deciderScoreComparatorFactory.stepDecided(localSearchStepScope);
  localSearchStepScope.setScore(DefaultHardAndSoftScore.valueOf(-10,-200));
  deciderScoreComparatorFactory.stepTaken(localSearchStepScope);
  localSearchStepScope=nextStepScope(localSearchStepScope);
  deciderScoreComparatorFactory.beforeDeciding(localSearchStepScope);
  assertTrue(deciderScoreComparatorFactory.createDeciderScoreComparator() instanceof NaturalScoreComparator);
  deciderScoreComparatorFactory.stepDecided(localSearchStepScope);
  localSearchStepScope.setScore(DefaultHardAndSoftScore.valueOf(-10,-200));
  deciderScoreComparatorFactory.stepTaken(localSearchStepScope);
  localSearchStepScope=nextStepScope(localSearchStepScope);
  deciderScoreComparatorFactory.beforeDeciding(localSearchStepScope);
  assertEquals(1000,((HardPenaltyDeciderScoreComparator)deciderScoreComparatorFactory.createDeciderScoreComparator()).getHardWeight());
  deciderScoreComparatorFactory.stepDecided(localSearchStepScope);
  localSearchStepScope.setScore(DefaultHardAndSoftScore.valueOf(-10,-200));
  deciderScoreComparatorFactory.stepTaken(localSearchStepScope);
}
