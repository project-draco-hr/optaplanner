{
  logger.info("Scheduling delete of machine ({}).",machine);
  doProblemFactChange(new ProblemFactChange(){
    public void doChange(    ScoreDirector scoreDirector){
      MachineReassignment machineReassignment=(MachineReassignment)scoreDirector.getWorkingSolution();
      for (      MrProcessAssignment processAssignment : machineReassignment.getProcessAssignmentList()) {
        if (Objects.equals(processAssignment.getOriginalMachine(),machine)) {
          scoreDirector.beforeProblemFactChanged(processAssignment);
          processAssignment.setOriginalMachine(null);
          scoreDirector.afterProblemFactChanged(processAssignment);
        }
        if (Objects.equals(processAssignment.getMachine(),machine)) {
          scoreDirector.beforeVariableChanged(processAssignment,"machine");
          processAssignment.setMachine(null);
          scoreDirector.afterVariableChanged(processAssignment,"machine");
        }
      }
      scoreDirector.triggerVariableListeners();
      machineReassignment.setMachineList(new ArrayList<MrMachine>(machineReassignment.getMachineList()));
      for (Iterator<MrMachine> it=machineReassignment.getMachineList().iterator(); it.hasNext(); ) {
        MrMachine workingMachine=it.next();
        if (Objects.equals(workingMachine,machine)) {
          scoreDirector.beforeProblemFactRemoved(workingMachine);
          it.remove();
          scoreDirector.afterProblemFactRemoved(workingMachine);
          break;
        }
      }
    }
  }
);
}
