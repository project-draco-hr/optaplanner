{
  HeuristicConfigPolicy phaseConfigPolicy=solverConfigPolicy.createPhaseConfigPolicy();
  DefaultCustomSolverPhase customSolverPhase=new DefaultCustomSolverPhase();
  configureSolverPhase(customSolverPhase,phaseIndex,phaseConfigPolicy,bestSolutionRecaller,solverTermination);
  if (ConfigUtils.isEmptyCollection(customSolverPhaseCommandClassList)) {
    throw new IllegalArgumentException("Configure at least 1 <customSolverPhaseCommandClass> in the <customSolverPhase> configuration.");
  }
  List<CustomSolverPhaseCommand> customSolverPhaseCommandList=new ArrayList<CustomSolverPhaseCommand>(customSolverPhaseCommandClassList.size());
  for (  Class<? extends CustomSolverPhaseCommand> customSolverPhaseCommandClass : customSolverPhaseCommandClassList) {
    CustomSolverPhaseCommand customSolverPhaseCommand=ConfigUtils.newInstance(this,"customSolverPhaseCommandClass",customSolverPhaseCommandClass);
    customSolverPhaseCommandList.add(customSolverPhaseCommand);
  }
  customSolverPhase.setCustomSolverPhaseCommandList(customSolverPhaseCommandList);
  customSolverPhase.setForceUpdateBestSolution(forceUpdateBestSolution == null ? false : forceUpdateBestSolution);
  return customSolverPhase;
}
