{
  InnerScoreDirector<Solution_> scoreDirector=stepScope.getScoreDirector();
  customPhaseCommand.changeWorkingSolution(scoreDirector);
  int uninitializedVariableCount=scoreDirector.getSolutionDescriptor().countUninitializedVariables(stepScope.getWorkingSolution());
  stepScope.setUninitializedVariableCount(uninitializedVariableCount);
  Score score=scoreDirector.calculateScore();
  stepScope.setScore(score);
  if (assertStepScoreFromScratch) {
    stepScope.getPhaseScope().assertWorkingScoreFromScratch(stepScope.getScore(),customPhaseCommand);
  }
  bestSolutionRecaller.processWorkingSolutionDuringStep(stepScope);
}
