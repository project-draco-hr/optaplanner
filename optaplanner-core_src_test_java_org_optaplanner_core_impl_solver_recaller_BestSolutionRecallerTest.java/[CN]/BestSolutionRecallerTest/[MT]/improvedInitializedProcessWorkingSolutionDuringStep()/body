{
  DefaultSolverScope<AbstractSolution> solverScope=createSolverScope();
  ConstructionHeuristicStepScope<AbstractSolution> stepScope=setupConstrunctionHeuristics(solverScope);
  AbstractSolution solution=mock(AbstractSolution.class);
  Score score=SimpleScore.parseScore("-1");
  when(solverScope.getScoreDirector().getSolutionDescriptor().getScore(solution)).thenReturn(score);
  solverScope.setBestSolution(solution);
  solverScope.setBestScore(score);
  AbstractSolution solution2=mock(AbstractSolution.class);
  Score score2=SimpleScore.parseScore("0");
  when(solverScope.getScoreDirector().getSolutionDescriptor().getScore(solution2)).thenReturn(score2);
  when(stepScope.getScore()).thenReturn(score2);
  when(stepScope.createOrGetClonedSolution()).thenReturn(solution2);
  when(stepScope.getUninitializedVariableCount()).thenReturn(0);
  solverScope.setBestUninitializedVariableCount(0);
  BestSolutionRecaller<AbstractSolution> recaller=createBestSolutionRecaller();
  recaller.processWorkingSolutionDuringStep(stepScope);
  assertEquals(solution2,solverScope.getBestSolution());
  assertEquals(score2,solverScope.getBestScore());
  assertEquals(0,solverScope.getBestUninitializedVariableCount());
}
