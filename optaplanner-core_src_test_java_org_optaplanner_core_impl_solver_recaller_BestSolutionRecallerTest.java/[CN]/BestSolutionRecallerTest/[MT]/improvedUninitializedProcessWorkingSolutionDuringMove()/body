{
  DefaultSolverScope<AbstractSolution> solverScope=createSolverScope();
  ConstructionHeuristicStepScope<AbstractSolution> stepScope=setupConstrunctionHeuristics(solverScope);
  AbstractSolution helpSolution=mock(AbstractSolution.class);
  when(solverScope.getScoreDirector().getSolutionDescriptor().getScore(helpSolution)).thenReturn(SimpleScore.parseScore("-2"));
  when(solverScope.getScoreDirector().cloneWorkingSolution()).thenReturn(helpSolution);
  solverScope.setBestUninitializedVariableCount(1);
  Score score=SimpleScore.parseScore("-1");
  BestSolutionRecaller<AbstractSolution> recaller=createBestSolutionRecaller();
  recaller.processWorkingSolutionDuringMove(0,score,stepScope);
  assertEquals(helpSolution,solverScope.getBestSolution());
  assertEquals(-2,((SimpleScore)solverScope.getBestScore()).getScore());
  assertEquals(0,solverScope.getBestUninitializedVariableCount());
}
