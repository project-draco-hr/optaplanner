{
  EntityDescriptor entityDescriptor=variableDescriptor.getEntityDescriptor();
  Class<?> type=memberAccessor.getType();
  collectionWrapping=Collection.class.isAssignableFrom(type);
  if (!collectionWrapping && !ValueRange.class.isAssignableFrom(type)) {
    throw new IllegalArgumentException("The entityClass (" + entityDescriptor.getEntityClass() + ") has a "+ PlanningVariable.class.getSimpleName()+ " annotated property ("+ variableDescriptor.getVariableName()+ ") that refers to a "+ ValueRangeProvider.class.getSimpleName()+ " annotated member ("+ memberAccessor+ ") that does not return a "+ Collection.class.getSimpleName()+ " or a "+ ValueRange.class.getSimpleName()+ ".");
  }
  if (collectionWrapping) {
    Type genericType=memberAccessor.getGenericType();
    if (genericType instanceof ParameterizedType) {
      ParameterizedType parameterizedType=(ParameterizedType)genericType;
      Type[] typeArguments=parameterizedType.getActualTypeArguments();
      if (typeArguments.length != 1) {
        throw new IllegalArgumentException("The entityClass (" + entityDescriptor.getEntityClass() + ") has a "+ PlanningVariable.class.getSimpleName()+ " annotated property ("+ variableDescriptor.getVariableName()+ ") that refers to a "+ ValueRangeProvider.class.getSimpleName()+ " annotated member ("+ memberAccessor+ ") that returns a parameterized "+ Collection.class.getSimpleName()+ ") with an unsupported number of generic parameters ("+ typeArguments.length+ ").");
      }
      Type typeArgument=typeArguments[0];
      if (!(typeArgument instanceof Class)) {
        throw new IllegalArgumentException("The entityClass (" + entityDescriptor.getEntityClass() + ") has a "+ PlanningVariable.class.getSimpleName()+ " annotated property ("+ variableDescriptor.getVariableName()+ ") that refers to a "+ ValueRangeProvider.class.getSimpleName()+ " annotated member ("+ memberAccessor+ ") that returns a parameterized "+ Collection.class.getSimpleName()+ " with an unsupported type arguments ("+ typeArgument+ ").");
      }
      Class collectionElementClass=((Class)typeArgument);
      Class<?> variablePropertyType=variableDescriptor.getVariablePropertyType();
      if (!variablePropertyType.isAssignableFrom(collectionElementClass)) {
        throw new IllegalArgumentException("The entityClass (" + entityDescriptor.getEntityClass() + ") has a "+ PlanningVariable.class.getSimpleName()+ " annotated property ("+ variableDescriptor.getVariableName()+ ") that refers to a "+ ValueRangeProvider.class.getSimpleName()+ " annotated member ("+ memberAccessor+ ") that returns a "+ Collection.class.getSimpleName()+ " with elements of type ("+ collectionElementClass+ ") which cannot be assigned to the "+ PlanningVariable.class.getSimpleName()+ "'s type ("+ variablePropertyType+ ").");
      }
    }
  }
  countable=collectionWrapping || CountableValueRange.class.isAssignableFrom(type);
}
