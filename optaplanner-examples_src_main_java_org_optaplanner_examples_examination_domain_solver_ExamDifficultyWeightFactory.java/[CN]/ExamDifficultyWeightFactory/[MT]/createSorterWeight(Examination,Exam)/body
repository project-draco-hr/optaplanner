{
  int studentSizeTotal=exam.getTopicStudentSize();
  int maximumDuration=exam.getTopicDuration();
  for (  PeriodPenalty periodPenalty : examination.getPeriodPenaltyList()) {
    if (periodPenalty.getLeftSideTopic().equals(exam.getTopic())) {
switch (periodPenalty.getPeriodPenaltyType()) {
case EXAM_COINCIDENCE:
        studentSizeTotal+=periodPenalty.getRightSideTopic().getStudentSize();
      maximumDuration=Math.max(maximumDuration,periodPenalty.getRightSideTopic().getDuration());
    break;
case EXCLUSION:
  break;
case AFTER:
break;
default :
throw new IllegalStateException("The periodPenaltyType (" + periodPenalty.getPeriodPenaltyType() + ") is not implemented.");
}
}
 else if (periodPenalty.getRightSideTopic().equals(exam.getTopic())) {
switch (periodPenalty.getPeriodPenaltyType()) {
case EXAM_COINCIDENCE:
studentSizeTotal+=periodPenalty.getLeftSideTopic().getStudentSize();
maximumDuration=Math.max(maximumDuration,periodPenalty.getLeftSideTopic().getDuration());
break;
case EXCLUSION:
break;
case AFTER:
studentSizeTotal+=periodPenalty.getLeftSideTopic().getStudentSize();
maximumDuration=Math.max(maximumDuration,periodPenalty.getLeftSideTopic().getDuration());
break;
default :
throw new IllegalStateException("The periodPenaltyType (" + periodPenalty.getPeriodPenaltyType() + ") is not implemented.");
}
}
}
return new ExamDifficultyWeight(exam,studentSizeTotal,maximumDuration);
}
