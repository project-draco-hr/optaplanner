{
  EntitySelector childEntitySelector=SelectorTestUtils.mockEntitySelector(TestdataEntity.class);
  when(childEntitySelector.getSize()).thenReturn(1L);
  CachingEntitySelector cachingEntitySelector=new CachingEntitySelector(childEntitySelector,SelectionCacheType.PHASE,true);
  cachingEntitySelector.constructCache(null);
  assertTrue(cachingEntitySelector.iterator() instanceof CachedListRandomIterator);
  cachingEntitySelector=new CachingEntitySelector(childEntitySelector,SelectionCacheType.PHASE,false);
  cachingEntitySelector.constructCache(null);
  assertFalse(cachingEntitySelector.iterator() instanceof CachedListRandomIterator);
}
