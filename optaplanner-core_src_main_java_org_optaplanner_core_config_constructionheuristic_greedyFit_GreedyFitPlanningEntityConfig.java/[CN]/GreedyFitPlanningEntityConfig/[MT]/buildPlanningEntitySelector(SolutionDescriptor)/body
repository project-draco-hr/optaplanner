{
  PlanningEntityDescriptor entityDescriptor;
  Class<?> resolvedEntityClass;
  if (planningEntityClass != null) {
    resolvedEntityClass=planningEntityClass;
  }
 else {
    Set<Class<?>> planningEntityClassSet=solutionDescriptor.getPlanningEntityClassSet();
    if (planningEntityClassSet.size() != 1) {
      throw new IllegalArgumentException("The greedyFitPlanningEntity has no planningEntityClass but there are multiple (" + planningEntityClassSet.size() + ") planningEntityClasses.");
    }
    resolvedEntityClass=planningEntityClassSet.iterator().next();
  }
  if (!solutionDescriptor.hasPlanningEntityDescriptor(planningEntityClass)) {
    throw new IllegalArgumentException("The greedyFitPlanningEntity has a planningEntityClass (" + planningEntityClass + ") that has not been configured as a planningEntity.");
  }
  entityDescriptor=solutionDescriptor.getPlanningEntityDescriptor(planningEntityClass);
  PlanningEntitySelector planningEntitySelector=new PlanningEntitySelector(entityDescriptor);
  planningEntitySelector.setSelectionOrder(selectionOrder != null ? selectionOrder : PlanningEntitySelectionOrder.ORIGINAL);
  return planningEntitySelector;
}
