{
  if (!excludeUninitializedPlanningEntity) {
    return values;
  }
  Collection<Object> filteredValues=new ArrayList<Object>(values.size());
  for (  Object value : values) {
    if (value.getClass().isAnnotationPresent(PlanningEntity.class)) {
      PlanningEntityDescriptor entityDescriptor=variableDescriptor.getPlanningEntityDescriptor().getSolutionDescriptor().getPlanningEntityDescriptor(value.getClass());
      if (entityDescriptor == null) {
        throw new IllegalArgumentException("The planningEntityClass (" + variableDescriptor.getPlanningEntityDescriptor().getPlanningEntityClass() + ") has a PlanningVariable annotated property ("+ variableDescriptor.getVariableName()+ ") with excludeUninitializedPlanningEntity (true),"+ " but a planning value class ("+ value.getClass()+ ") annotated with PlanningEntity is a non configured as a planning entity.");
      }
      if (entityDescriptor.isInitialized(value)) {
        filteredValues.add(value);
      }
    }
  }
  return filteredValues;
}
