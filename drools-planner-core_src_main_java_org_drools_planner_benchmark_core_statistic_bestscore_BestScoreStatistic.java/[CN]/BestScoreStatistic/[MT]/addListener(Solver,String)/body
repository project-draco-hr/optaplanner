{
  if (configNameList.contains(configName)) {
    throw new IllegalArgumentException("Cannot add a listener with the same configName (" + configName + ") twice.");
  }
  configNameList.add(configName);
  BestScoreStatisticListener bestScoreStatisticListener=new BestScoreStatisticListener();
  solver.addEventListener(bestScoreStatisticListener);
  bestScoreStatisticListenerMap.put(configName,bestScoreStatisticListener);
  ScoreDefinition newScoreDefinition=solver.getScoreDirectorFactory().getScoreDefinition();
  if (scoreDefinition == null) {
    scoreDefinition=newScoreDefinition;
  }
 else {
    if (!scoreDefinition.getClass().equals(newScoreDefinition.getClass())) {
      throw new IllegalStateException("The new scoreDefinition (" + newScoreDefinition + ") should be of the same class as the other scoreDefinition ("+ scoreDefinition+ ")");
    }
  }
}
