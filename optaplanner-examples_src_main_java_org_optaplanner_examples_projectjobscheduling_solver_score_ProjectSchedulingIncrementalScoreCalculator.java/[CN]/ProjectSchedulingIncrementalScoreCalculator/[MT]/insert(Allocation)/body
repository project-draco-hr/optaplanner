{
  trackAllocation(allocation);
  Integer endDate=allocation.getEndDate();
  if (endDate != null && endDate > maximalEndDate) {
    maximalEndDate=endDate;
    softScore=-(maximalEndDate - minimalReleaseDate);
  }
  mediumScore=-getTotalProjectDelay(allocation);
  ExecutionMode executionMode=allocation.getExecutionMode();
  if (executionMode != null && allocation.getJob().getJobType() == JobType.STANDARD) {
    for (    ResourceRequirement resourceRequirement : executionMode.getResourceRequirementList()) {
      ResourceCapacityTracker tracker=resourceCapacityTrackerMap.get(resourceRequirement.getResource());
      hardScore-=tracker.getHardScore();
      tracker.insert(resourceRequirement,allocation);
      hardScore+=tracker.getHardScore();
    }
  }
}
